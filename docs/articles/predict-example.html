<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prediction with BCF • bcf2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Prediction with BCF">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bcf2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/predict-example.html">Prediction with BCF</a>
    </li>
    <li>
      <a href="../articles/simple-example.html">A Simple Example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Prediction with BCF</h1>
            
      
      
      <div class="hidden name"><code>predict-example.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we show how we can use the BCF package to predict estimates for new data off a fitted BCF object.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bcf2)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt; Warning: replacing previous import 'Rcpp::LdFlags' by 'RcppParallel::LdFlags'</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; when loading 'bcf2'</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; Attaching package: 'bcf2'</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; The following object is masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt;     predict</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(latex2exp)</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a></code></pre></div>
<div id="simulate-data" class="section level2">
<h2 class="hasAnchor">
<a href="#simulate-data" class="anchor"></a>Simulate data</h2>
<p>First, we simulate some data for testing. This data set has three covariates <span class="math inline">\(X\)</span>, which we divide into two control variables – that is, two covariates related to the outcome, <span class="math inline">\(y\)</span> – and one effect moderator – that is, a covariates related to the treatment effect, <span class="math inline">\(\tau\)</span>.</p>
<p>We draw three random <span class="math inline">\(X\)</span>s for each unit and generate each unit’s expected outcome without treatment, <span class="math inline">\(\mu_i\)</span>, as a function of <span class="math inline">\(x^{(1)}_i\)</span> and <span class="math inline">\(x^{(2)}_i\)</span>. Each unit’s probability of joining the intervention, <span class="math inline">\(\pi_i\)</span>, is also a function of <span class="math inline">\(\mu_i\)</span>, so that units with larger responses are more likely to participate in the intervention. We then assign units to treatment (<span class="math inline">\(z_i = 1\)</span>) or comparison (<span class="math inline">\(z_i = 0\)</span>) as a function of <span class="math inline">\(\pi_i\)</span>.</p>
<p>Then we generate the true treatment effect for each unit, <span class="math inline">\(\tau_i\)</span>. As noted above, <span class="math inline">\(\tau_i\)</span> is a function of <span class="math inline">\(x^{(3)}_i\)</span>. The observed outcome, <span class="math inline">\(y_i\)</span>, is a function of <span class="math inline">\(\mu_i\)</span>, <span class="math inline">\(\tau_i\)</span>, a random error term <span class="math inline">\(\sigma\)</span>, and weights <span class="math inline">\(w\)</span> if applicable.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">## Training data</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">p &lt;-<span class="st"> </span><span class="dv">3</span> <span class="co"># two control variables and one effect moderator</span></a>
<a class="sourceLine" id="cb2-6" title="6">n &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb2-7" title="7">n_burn &lt;-<span class="st"> </span><span class="dv">2000</span></a>
<a class="sourceLine" id="cb2-8" title="8">n_sim &lt;-<span class="st"> </span><span class="dv">1500</span></a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10">x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(n<span class="op">*</span>p), <span class="dt">nrow=</span>n)</a>
<a class="sourceLine" id="cb2-11" title="11">weights &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(n))</a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co"># create targeted selection, whereby a practice's likelihood of joining the intervention (pi) is related to their expected outcome (mu)</span></a>
<a class="sourceLine" id="cb2-14" title="14">q &lt;-<span class="st"> </span><span class="dv">-1</span><span class="op">*</span>(x[,<span class="dv">1</span>]<span class="op">&gt;</span>(x[,<span class="dv">2</span>])) <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">*</span>(x[,<span class="dv">1</span>]<span class="op">&lt;</span>(x[,<span class="dv">2</span>])) <span class="fl">-0.1</span></a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co"># generate treatment variable</span></a>
<a class="sourceLine" id="cb2-17" title="17">pi &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">pnorm</a></span>(q)</a>
<a class="sourceLine" id="cb2-18" title="18">z &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span>(n,<span class="dv">1</span>,pi)</a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co"># tau is the true treatment effect. It varies across practices as a function of</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co"># X3, the effect moderator</span></a>
<a class="sourceLine" id="cb2-22" title="22">tau &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="op">-</span>x[,<span class="dv">3</span>])))</a>
<a class="sourceLine" id="cb2-23" title="23"></a>
<a class="sourceLine" id="cb2-24" title="24">mu &lt;-<span class="st"> </span>q</a>
<a class="sourceLine" id="cb2-25" title="25"></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="co"># generate the response using q, tau and z</span></a>
<a class="sourceLine" id="cb2-27" title="27">y_noiseless &lt;-<span class="st"> </span>mu <span class="op">+</span><span class="st"> </span>tau<span class="op">*</span>z</a>
<a class="sourceLine" id="cb2-28" title="28"></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co"># set the noise level relative to the expected mean function of Y</span></a>
<a class="sourceLine" id="cb2-30" title="30">sigma &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/diff.html">diff</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/range.html">range</a></span>(mu <span class="op">+</span><span class="st"> </span>tau<span class="op">*</span>pi))<span class="op">/</span><span class="dv">8</span></a>
<a class="sourceLine" id="cb2-31" title="31"></a>
<a class="sourceLine" id="cb2-32" title="32"><span class="co"># draw the response variable with additive error</span></a>
<a class="sourceLine" id="cb2-33" title="33">y &lt;-<span class="st"> </span>y_noiseless <span class="op">+</span><span class="st"> </span>sigma<span class="op">*</span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(n)<span class="op">/</span><span class="kw"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span>(weights)</a>
<a class="sourceLine" id="cb2-34" title="34"></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="co">## Testing data</span></a>
<a class="sourceLine" id="cb2-36" title="36">n_test =<span class="st"> </span><span class="dv">50</span></a>
<a class="sourceLine" id="cb2-37" title="37"></a>
<a class="sourceLine" id="cb2-38" title="38">x_pred  &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(n_test<span class="op">*</span>p), <span class="dt">nrow=</span>n_test)</a>
<a class="sourceLine" id="cb2-39" title="39">special_x3 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">3.1</span>, <span class="fl">-2.9</span>, <span class="fl">2.76</span>, <span class="fl">2.8</span>, <span class="fl">2.85</span>)</a>
<a class="sourceLine" id="cb2-40" title="40">x_pred[ (n_test <span class="op">-</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(special_x3) <span class="op">+</span><span class="st"> </span><span class="dv">1</span> )<span class="op">:</span>n_test,<span class="dv">3</span>] &lt;-<span class="st"> </span>special_x3 <span class="co"># including some X3s outside of range</span></a>
<a class="sourceLine" id="cb2-41" title="41"></a>
<a class="sourceLine" id="cb2-42" title="42">q_pred  &lt;-<span class="st"> </span><span class="dv">-1</span><span class="op">*</span>(x_pred[,<span class="dv">1</span>]<span class="op">&gt;</span>(x_pred[,<span class="dv">2</span>])) <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">*</span>(x_pred[,<span class="dv">1</span>]<span class="op">&lt;</span>(x_pred[,<span class="dv">2</span>])) <span class="op">-</span><span class="st"> </span><span class="fl">0.1</span></a>
<a class="sourceLine" id="cb2-43" title="43">pi_pred &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">pnorm</a></span>(q_pred)</a>
<a class="sourceLine" id="cb2-44" title="44">z_pred  &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span>(n_test,<span class="dv">1</span>, pi_pred)</a></code></pre></div>
</div>
<div id="fitting-bcf" class="section level2">
<h2 class="hasAnchor">
<a href="#fitting-bcf" class="anchor"></a>Fitting BCF</h2>
<p>We now fit a BCF model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">bcf_out &lt;-<span class="st"> </span>bcf2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bcf2/man/bcf.html">bcf</a></span>(<span class="dt">y               =</span> y,</a>
<a class="sourceLine" id="cb3-2" title="2">                     <span class="dt">z               =</span> z,</a>
<a class="sourceLine" id="cb3-3" title="3">                     <span class="dt">x_control       =</span> x,</a>
<a class="sourceLine" id="cb3-4" title="4">                     <span class="dt">x_moderate      =</span> x,</a>
<a class="sourceLine" id="cb3-5" title="5">                     <span class="dt">pihat           =</span> pi,</a>
<a class="sourceLine" id="cb3-6" title="6">                     <span class="dt">nburn           =</span> n_burn,</a>
<a class="sourceLine" id="cb3-7" title="7">                     <span class="dt">nsim            =</span> n_sim,</a>
<a class="sourceLine" id="cb3-8" title="8">                     <span class="dt">w               =</span> weights,</a>
<a class="sourceLine" id="cb3-9" title="9">                     <span class="dt">n_chains        =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb3-10" title="10">                     <span class="dt">update_interval =</span> <span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="predicting-using-bcf" class="section level2">
<h2 class="hasAnchor">
<a href="#predicting-using-bcf" class="anchor"></a>Predicting using BCF</h2>
<p>We now use our testing Xs for prediction.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">pred_out =<span class="st"> </span>bcf2<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bcf2/man/predict.html">predict</a></span>(<span class="dt">bcf_out=</span>bcf_out,</a>
<a class="sourceLine" id="cb4-2" title="2">                         <span class="dt">x_predict_control=</span>x_pred,</a>
<a class="sourceLine" id="cb4-3" title="3">                         <span class="dt">x_predict_moderate=</span>x_pred,</a>
<a class="sourceLine" id="cb4-4" title="4">                         <span class="dt">pi_pred=</span>pi_pred,</a>
<a class="sourceLine" id="cb4-5" title="5">                         <span class="dt">z_pred=</span>z_pred,</a>
<a class="sourceLine" id="cb4-6" title="6">                         <span class="dt">save_tree_directory =</span> <span class="st">'..'</span>)</a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; Initializing BCF Prediction</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; Starting Prediction</span></a></code></pre></div>
</div>
<div id="comparison" class="section level2">
<h2 class="hasAnchor">
<a href="#comparison" class="anchor"></a>Comparison</h2>
<p>Let’s compare the results of our training and testing data. We will use <span class="math inline">\(x_3\)</span> as covariate since we know from the data creation phase that this variable is the strongest effect modifier.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">lower &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(bcf_out<span class="op">$</span>tau, <span class="dv">2</span>, quantile, <span class="fl">0.025</span>), <span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(pred_out<span class="op">$</span>tau, <span class="dv">2</span>, quantile, <span class="fl">0.025</span>))</a>
<a class="sourceLine" id="cb5-2" title="2">upper &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(bcf_out<span class="op">$</span>tau, <span class="dv">2</span>, quantile, <span class="fl">0.975</span>), <span class="kw"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(pred_out<span class="op">$</span>tau, <span class="dv">2</span>, quantile, <span class="fl">0.975</span>))</a>
<a class="sourceLine" id="cb5-3" title="3">group &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"training"</span>, n), <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"testing"</span>, n_test)))</a>
<a class="sourceLine" id="cb5-4" title="4"></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">ggplot</span>(<span class="ot">NULL</span>, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(x[,<span class="dv">3</span>], x_pred[,<span class="dv">3</span>]), </a>
<a class="sourceLine" id="cb5-6" title="6">                 <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/colSums.html">colMeans</a></span>(bcf_out<span class="op">$</span>tau), <span class="kw"><a href="https://rdrr.io/r/base/colSums.html">colMeans</a></span>(pred_out<span class="op">$</span>tau)),</a>
<a class="sourceLine" id="cb5-7" title="7">                 <span class="dt">alpha =</span> group,</a>
<a class="sourceLine" id="cb5-8" title="8">                 <span class="dt">color =</span> group)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> upper)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="st">  </span><span class="kw">scale_alpha_discrete</span>(<span class="dt">range =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1.0</span>, <span class="fl">0.3</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="st">  </span><span class="kw">xlab</span>(<span class="kw">TeX</span>(<span class="st">"$x_3$"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="st">  </span><span class="kw">ylab</span>(<span class="kw">TeX</span>(<span class="st">"$</span><span class="ch">\\</span><span class="st">hat{</span><span class="ch">\\</span><span class="st">tau}$"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="st">  </span><span class="kw">coord_flip</span>()</a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; Warning: Using alpha for a discrete variable is not advised.</span></a></code></pre></div>
<p><img src="predict-example_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>In this plot, we notice that predictions even for Xs that are outside of the range of our training data are within the expected range, and that they have wider credible intervals, as expected.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#simulate-data">Simulate data</a></li>
      <li><a href="#fitting-bcf">Fitting BCF</a></li>
      <li><a href="#predicting-using-bcf">Predicting using BCF</a></li>
      <li><a href="#comparison">Comparison</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jared S. Murray, P. Richard Hahn, Carlos Carvalho.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
